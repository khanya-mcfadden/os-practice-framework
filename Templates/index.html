<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Home Page{% endblock %}</title>
    <link rel="stylesheet" href="/static/main.css">
</head>


<body>
    <div class="welcome">
        <div style="display: flex; align-items: center; justify-content: center;">
            <h1>Welcome to my website framework!</h1>
            <img id="logo" src="/static/original Logo.png" alt="comp website Logo"
                style="margin-left: 20px; width: 100px; height: auto;">
        </div>
    </div>

    <nav class="nav">
        <a href="/"             style="color: #C9C8C8">Home</a>
        <a href="/about"        style="color: #C9C8C8">About</a>
        <a href="/courses"      style="color: #C9C8C8">courses</a>
        <a href="/health_page"  style="color: #C9C8C8">weather</a>        
        {% if session['username'] %}
        <a href="/Orderingpage" style="color: #C9C8C8">Ordering</a>
        <a href="/BookingPage"  style="color: #C9C8C8">Booking</a>

        <a href="/profile"      style="color: #C9C8C8; float:right;">Profile</a>
        {% else %}
        <a href="/Sign-Up"      style="color: #C9C8C8; float: right;">Sign Up</a>
        <a href="/login"        style="color: #C9C8C8; float: right;">Login</a>
        {% endif %}
        {% if session['admin'] %}
        <a href="/user_info"    style="color: #C9C8C8; float: right;">user info</a>
        <a href="/test"         style="color: #C9C8C8; float: right;">test</a>
        {% endif %}
        
    </nav>
    <div class="navbar"></div>
    {% block content %}
    <div style="text-align: center; padding: 20px;">
        <p>We are glad to have you here. Explore and enjoy your stay!</p>
    </div>
    {% endblock %}
    <div class="footer">
        <footer>
            <section id="themes" style="padding: 5px;">
                <h4 style="margin: 5px 0;">Contact Us</h4>
                <hr style="margin: 5px 0;">
                <p style="margin: 5px 0;">Email: <a href="mailto:khanyamcf@gmail.com"
                        style="color: #3f3ffa;">khanyamcf@gmail.com</a></p>
                <h5 style="margin: 5px 0;">Toggle Dark/Light Mode</h5>
                <button onclick="toggleDarkMode()" style="margin-bottom: 5px;">Toggle dark mode</button>
            </section>
            <script>
                function toggleDarkMode() {
                    var elements = document.querySelectorAll('body, .sidebar, .content');
                    elements.forEach(element => {
                        element.classList.toggle("dark-mode");
                    });

                    var logo = document.getElementById('logo');
                    if (elements[0].classList.contains("dark-mode")) {
                        localStorage.setItem("theme", "dark");
                        logo.src = "/static/original Logo white.png";
                    } else {
                        localStorage.setItem("theme", "light");
                        logo.src = "/static/original Logo.png";
                    }
                }

                window.onload = function () {
                    if (localStorage.getItem("theme") === "dark") {
                        var elements = document.querySelectorAll('body, .sidebar, .content');
                        elements.forEach(element => {
                            element.classList.add("dark-mode");
                        });
                        document.getElementById('logo').src = "/static/original Logo white.png";
                    }
                }
                const form = document.querySelector('form');
                if (form) {
                    form.addEventListener('submit', async (e) => {
                        e.preventDefault();
                        const formAction = form.getAttribute('action');
                        const response = await fetch(formAction, {
                            method: 'POST',
                            body: new FormData(form)
                        });

                        if (!response.ok) {
                            const message = await response.text();
                            const overlay = document.createElement('div');
                            overlay.style.cssText = 'position:fixed; top:20px; left:50%; transform:translateX(-50%); background:rgba(255,0,0,0.8); color:white; padding:15px; border-radius:5px; z-index:1000;';
                            overlay.textContent = message;
                            document.body.appendChild(overlay);
                            setTimeout(() => overlay.remove(), 3000);
                        } else {
                            window.location.href = '/';
                        }
                    });
                }

            </script>
        </footer>
    </div>


</body>

</html>