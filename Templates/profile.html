<!DOCTYPE html>
<html lang="en">
{% extends "index.html" %}
{% block title %}profile{% endblock %}

<body>
{% block content %}
    <h1>Welcome, {{ username }}!</h1>
    <div class="light-mode">
        <div class="settings-container">
            <!-- Sidebar -->
            <aside class="sidebar">
                <h2>Settings</h2>
                <ul>
                    <li><a href="#general">General</a></li>
                    <li><a href="#security">Security</a></li>
                    <li><a href="#themes">Themes</a></li>
                    <li><a href="#accessibility">Accessibility</a></li>
                    <li><a href="#course-logging">Course Logging</a></li>
                </ul>
            </aside>

            <!-- Main Content -->
            <main class="content">
                <!-- General Settings -->
                <section id="general">
                    <h3>General Settings</h3>
                    <form>
                        <label for="username">Username:</label>
                        <input type="text" id="username" name="username" placeholder="Enter your username" required>
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" placeholder="Enter your email" required>
                        <button type="submit">Save Changes</button>
                    </form>
                </section>

                <!-- Security Settings -->
                <section id="security">
                    <h3>Security Settings</h3>
                    <form>
                        <label for="current-password">Current Password:</label>
                        <input type="password" id="current-password" name="current-password" required>
                        <label for="new-password">New Password:</label>
                        <input type="password" id="new-password" name="new-password" required>
                        <label for="confirm-password">Confirm New Password:</label>
                        <input type="password" id="confirm-password" name="confirm-password" required>
                        <button type="submit">Update Password</button>
                    </form>
                </section>

                <!-- Theme Settings -->
                <section id="themes">
                    <h3>Theme Settings</h3>
                    <form action="/theme" method="POST"></form>
                    <h2>Toggle Dark/Light Mode</h2>
                    <button onclick="toggleDarkMode()">Toggle dark mode</button>
                </section>
                <script>
                    function toggleDarkMode() {
                        var elements = document.querySelectorAll('body, .sidebar, .content');
                        elements.forEach(element => {
                            element.classList.toggle("dark-mode");
                        });
                    
                        if (elements[0].classList.contains("dark-mode")) {
                            localStorage.setItem("theme", "dark");
                        } else {
                            localStorage.setItem("theme", "light");
                        }
                    }
                    
                    window.onload = function() {
                        if (localStorage.getItem("theme") === "dark") {
                            var elements = document.querySelectorAll('body, .sidebar, .content');
                            elements.forEach(element => {
                                element.classList.add("dark-mode");
                            });
                        }
                    }
                </script>
                
                <!-- Accessibility -->
                <section id="accessibility">
                    <h3>Accessibility</h3>
                    <form>
                        <div>
                            <label for="high-contrast">High Contrast Mode:</label>
                            <input type="checkbox" id="high-contrast" name="high-contrast">
                        </div>
                        <div>
                            <label for="text-resize">Text Resize:</label>
                            <input type="range" id="text-resize" name="text-resize" min="12" max="24" value="16">
                            <span id="text-size-display">16px</span>
                        </div>
                        <button type="submit">Save Accessibility Settings</button>
                    </form>
                </section>

                <!-- Course Logging -->
                <section id="bookings">
                    <h3>Your Bookings</h3>
                    {% if bookings %}
                        <table>
                            <thead>
                                <tr>
                                    <th>Course</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for booking in bookings %}
                                    <tr>
                                        <td>{{ booking[0] }}</td>
                                        <td>{{ booking[1] }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    {% else %}
                        <p>No bookings found.</p>
                    {% endif %}
                </section>
                
            </main>
        </div>
    </div>

    <style>
        /* General Styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        .settings-container {
            display: flex;
        }

        .sidebar {
            width: 20%;
            background-color: #f5f5f5;
            padding: 20px;
        }

        .sidebar h2 {
            font-size: 18px;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
        }

        .sidebar ul li {
            margin: 10px 0;
        }

        .sidebar ul li a {
            text-decoration: none;
            color: #333;
        }

        .content {
            width: 80%;
            padding: 20px;
            margin-bottom: 170px;
        }

        /* Theme Styles */
        .dark-mode {
            background-color: black;
            color: white;
        }

        .sidebar.dark-mode {
            background-color: #444;
        }

        .content.dark-mode {
            background-color: #222;
        }
    </style>
{% endblock %}
</body>
</html>
